@using DotFlyer.Common.Payload
@inherits Microsoft.AspNetCore.Components.ComponentBase

@code {
    [Parameter]
    public required EmailMessage Model { get; set; }
}

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>@Model.Subject</title>
  <style>
    body { font-family: Arial, sans-serif; color:#111; }
    .header { margin-bottom: 10px; }
    .section { margin-top: 12px; }
    .small { font-size: 0.9em; color:#555; }
  </style>
</head>
<body>
  <div class="header">
    <strong>@Model.Subject</strong>
  </div>
  <div class="section">
      @((MarkupString)(Model.Body ?? string.Empty))
  </div>
  @if (Model.Attachments != null && Model.Attachments.Any()) {
    <div class="section small">
      <div>Attachments:</div>
      <ul>
        @foreach (var a in Model.Attachments) {
          <li>@a</li>
        }
      </ul>
    </div>
  }
  @if (Model.Tags != null && Model.Tags.Any()) {
    <div class="section small">
      <div>Tags:</div>
      <ul>
        @foreach (var t in Model.Tags) {
          <li>@t.Key: @t.Value</li>
        }
      </ul>
    </div>
  }
</body>
</html>