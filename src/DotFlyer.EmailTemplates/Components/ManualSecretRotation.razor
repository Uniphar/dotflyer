@namespace DotFlyer.EmailTemplates.Components
@using DotFlyer.Common.EmailTemplates
@inherits Microsoft.AspNetCore.Components.ComponentBase

@code {
    [Parameter]
    public required ManualSecretRotationModel Model { get; set; }
}

<BaseEmailLayout>
    <div class="subject">Manual Secret Rotation for <b>@Model.ResourceName</b></div>
    <div class="info-card">
        <p class="info-card-title">Rotation Details</p>
        <p><strong>Tenant Id:</strong> @Model.TenantId</p>
        <p><strong>App Id:</strong> @Model.AppId</p>
        <p><strong>Secret Name:</strong> @Model.SecretName</p>
        <p><strong>Old secret will be deleted at:</strong> @Model.OldSecretDeletionDateUtc.ToUniversalTime().ToString("G") UTC</p>
        <div style="margin-top:16px;">
            <p><strong>Key vaults affected:</strong></p>
            @if (Model.KeyVaults is not null)
            {
                <ul>
                    @foreach (var kv in Model.KeyVaults)
                    {
                        <li>@kv</li>
                    }
                </ul>
            }
            else
            {
                <p>No key vaults were specified.</p>
            }

            @if (!string.IsNullOrEmpty(Model.PwPushUrl))
            {
                <p>
                    <strong>Password delivery link:</strong>
                    <a href="@Model.PwPushUrl">@Model.PwPushUrl</a><br />
                    <span style="font-size:12px; color:#6b7280;">
                        Link valid for @Model.PwPushExpiresInDays days or @Model.PwPushExpiresAfterViews views (whichever comes first).
                    </span>
                </p>
            }
        </div>
    </div>
</BaseEmailLayout>