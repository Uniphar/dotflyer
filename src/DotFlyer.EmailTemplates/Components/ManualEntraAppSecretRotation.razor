@namespace DotFlyer.EmailTemplates.Components
@using DotFlyer.Common.EmailTemplates
@inherits Microsoft.AspNetCore.Components.ComponentBase

@code {
    [Parameter]
    public required ManualEntraAppSecretRotationModel Model { get; set; }
}

<BaseEmailLayout>
    <div class="subject">Manual Secret Rotation for <b>@Model.ResourceName</b></div>
    <div class="info-card">
        <p class="info-card-title">Rotation Details</p>
        
        <p><strong>Tenant Id:</strong> @Model.TenantId</p>
        <p><strong>App Id:</strong> @Model.AppId</p>
        <p><strong>Secret Name:</strong> @Model.SecretName</p>
        <p><strong>Old secret will be deleted at:</strong> @Model.OldSecretDeletionDateUtc.ToUniversalTime().ToString("G") UTC</p>
        
        <div class="mt-4">
            <p><strong>Key vaults affected:</strong></p>
            <ul>
                @foreach (var kv in Model.KeyVaults)
                {
                    <li>@kv</li>
                }
            </ul>

            @if (!string.IsNullOrEmpty(Model.PwPushUrl))
            {
                <p>
                    <strong>Password delivery link:</strong>
                    <a href="@Model.PwPushUrl">@Model.PwPushUrl</a><br />
                    <span class="email-muted">
                        Link valid for @Model.PwPushExpiresInDays days or @Model.PwPushExpiresAfterViews views (whichever comes first).
                    </span>
                </p>
            }
        </div>
    </div>
</BaseEmailLayout>
